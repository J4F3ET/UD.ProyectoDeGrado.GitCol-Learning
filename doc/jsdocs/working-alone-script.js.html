<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: working-alone-script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: working-alone-script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { DataViewer } from "./dataViewer/DataViewer.js";
import { workingAloneComandManager as comandManager} from "./comandManager/working-alone-comandManager.js";
import { Observer } from "./dataViewer/Observer.js";
const REF_STORAGE_REPOSITORY = "local";
const REF_STORAGE_LOG = "log";
let listComands = JSON.parse(localStorage.getItem(REF_STORAGE_LOG))?.filter(log => log.tag === "comand")?.map(log => log.message)|| [];
const dataViewer = new DataViewer(document.getElementById("svgContainer"));
const observer = new Observer()
let accountComands = listComands.length;
// EVENT LISTENERS
document.addEventListener("DOMContentLoaded", () => {
    dataViewer.currentData =  null;
    dataViewer.logComands = null;
});
document.getElementById("comandInput").addEventListener("keyup",(e) => {
    if(e.key === "ArrowUp"){
        accountComands= accountComands === 0 ? listComands.length-1 : accountComands-1;
        e.target.value = listComands[accountComands] || "";
        return;
    }
    if(e.key === "ArrowDown"){
        accountComands= accountComands >= listComands.length-1 ? 0 : accountComands+1;
        e.target.value = listComands[accountComands] || "";
        return
    }
    if(e.key === "Enter"){
        executeCommand(e.target.value);
        e.target.value = "";
        listComands = JSON.parse(localStorage.getItem(REF_STORAGE_LOG)).filter(log => log.tag === "comand").map(log => log.message);
        accountComands = listComands.length;
        return;
    }
});
// FUNCTIONS
/**
 * @name executeCommand
 * @description Execute the comand and show the result
 * @param {String} comand 
 */
const executeCommand = (comand) => {
    comand !== "" ? comandManager.createMessage('comand',comand) : null;
    try {
        const [_,gitComand, ...comandConfig] = comand.split(' ');
        comandManager.executeCommand(comand,gitComand,comandConfig);
    } catch (error) {
        comandManager.createMessage('error',error.message);
    }finally{
        accountComands = 1;
    }
};
// OBSERVER
observer.subscribe("log",dataViewer)
observer.subscribe("SVG",dataViewer)
setInterval(()=>{
    observer.notify("SVG",localStorage.getItem(REF_STORAGE_REPOSITORY))
    observer.notify("log",localStorage.getItem(REF_STORAGE_LOG))
},500);
// ZONE VIEW (EFECS AND OBSERVERS)
const containerLogs = document.getElementById("logContainer");
const containerSvg = document.getElementById("svgContainer");
const observerScroll = new MutationObserver(()=>containerLogs.scrollTop = containerLogs.scrollHeight)
const observerScrollSvgHorizontal = new MutationObserver(()=>containerSvg.scrollLeft = containerSvg.scrollWidth)
observerScroll.observe(containerLogs,{childList:true})
observerScrollSvgHorizontal.observe(containerSvg, { childList: true, subtree: true });
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Commit_Commit.html">Commit</a></li></ul><h3>Global</h3><ul><li><a href="global.html#callBackConfigDelete">callBackConfigDelete</a></li><li><a href="global.html#callBackConfigFiles">callBackConfigFiles</a></li><li><a href="global.html#callBackConfigList">callBackConfigList</a></li><li><a href="global.html#callBackConfigMessage">callBackConfigMessage</a></li><li><a href="global.html#callBackConfigRemoteBranch">callBackConfigRemoteBranch</a></li><li><a href="global.html#callBackConfigRename">callBackConfigRename</a></li><li><a href="global.html#callBackCreateBranch">callBackCreateBranch</a></li><li><a href="global.html#callBackHelp">callBackHelp</a></li><li><a href="global.html#callbackHelp">callbackHelp</a></li><li><a href="global.html#changeDetachedCommitToCommit">changeDetachedCommitToCommit</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#createBranch">createBranch</a></li><li><a href="global.html#createCod">createCod</a></li><li><a href="global.html#createCommit">createCommit</a></li><li><a href="global.html#createLine">createLine</a></li><li><a href="global.html#createMessage">createMessage</a></li><li><a href="global.html#createMessageInfo">createMessageInfo</a></li><li><a href="global.html#createRectTag">createRectTag</a></li><li><a href="global.html#createTag">createTag</a></li><li><a href="global.html#createText">createText</a></li><li><a href="global.html#createVSG">createVSG</a></li><li><a href="global.html#currentHead">currentHead</a></li><li><a href="global.html#deleteBranch">deleteBranch</a></li><li><a href="global.html#detachedBranchAsoociated">detachedBranchAsoociated</a></li><li><a href="global.html#execute">execute</a></li><li><a href="global.html#executeCommand">executeCommand</a></li><li><a href="global.html#findBranchAssociatedToCommit">findBranchAssociatedToCommit</a></li><li><a href="global.html#findChildrens">findChildrens</a></li><li><a href="global.html#findCommitsParents">findCommitsParents</a></li><li><a href="global.html#findFirstCommitAssociatedToDeteached">findFirstCommitAssociatedToDeteached</a></li><li><a href="global.html#generateLocationCommitCase2">generateLocationCommitCase2</a></li><li><a href="global.html#generateLocationCommitCase3">generateLocationCommitCase3</a></li><li><a href="global.html#getLocalBranches">getLocalBranches</a></li><li><a href="global.html#getRemoteBranches">getRemoteBranches</a></li><li><a href="global.html#goToCommit">goToCommit</a></li><li><a href="global.html#notify">notify</a></li><li><a href="global.html#remoteClassFromCommit">remoteClassFromCommit</a></li><li><a href="global.html#removeCommitsUntilSpecificPoints">removeCommitsUntilSpecificPoints</a></li><li><a href="global.html#removeHeadTag">removeHeadTag</a></li><li><a href="global.html#removeTagOfCommit">removeTagOfCommit</a></li><li><a href="global.html#removeTags">removeTags</a></li><li><a href="global.html#renameBranch">renameBranch</a></li><li><a href="global.html#renderCommitsToSVG">renderCommitsToSVG</a></li><li><a href="global.html#renderInfoToSVG">renderInfoToSVG</a></li><li><a href="global.html#resetConfig">resetConfig</a></li><li><a href="global.html#resizeSVG">resizeSVG</a></li><li><a href="global.html#resolveConfig">resolveConfig</a></li><li><a href="global.html#resolveConfigure">resolveConfigure</a></li><li><a href="global.html#resolveLocationCommit">resolveLocationCommit</a></li><li><a href="global.html#updateCommitToStorage">updateCommitToStorage</a></li><li><a href="global.html#updateLocationChildsOfCommit">updateLocationChildsOfCommit</a></li><li><a href="global.html#updateLog">updateLog</a></li><li><a href="global.html#updateSVG">updateSVG</a></li><li><a href="global.html#validateConfig">validateConfig</a></li><li><a href="global.html#verifyComand">verifyComand</a></li><li><a href="global.html#widthText">widthText</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Mar 31 2024 11:11:30 GMT-0500 (hora est√°ndar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
